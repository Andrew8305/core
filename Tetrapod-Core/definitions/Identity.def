java package io.tetrapod.protocol.identity
java outdir "../src"
javascript outdir "../webContent/tetrapod"

service Identity @version(1) @id(4) @web("/api/identity/")

public request Login @web
   1: string email
   2: string password  
   error UNKNOWN_USERNAME, WRONG_PASSWORD
   
public response Login
   1: int accountId      
   2: string authToken  

public request Create   
   1: string username  
   2: string email
   3: string password
   
public response Create  
   1: int accountId
   2: string authToken
   
protected request Info
   1: int accountId
   2: string authToken
   
protected response Info
   1: string username 
   2: int properties
   
admin request UpdateProperties @web
   1: int accountId
   2: int properties // new properties values
   3: int mask       // which properties to update
   4: string authToken
   
struct User
   1: string username
   2: int accountId
   3: int properties // bitmap
   
   const int PROPS_DEVELOPER  = 1
   const int PROPS_ADMIN_T1   = 2
   const int PROPS_ADMIN_T2   = 4 
   const int PROPS_ADMIN_T3   = 8
   const int PROPS_ADMIN_T4   = 16
   const int PROPS_BANNED_T1  = 32
   const int PROPS_BANNED_T2  = 64
   const int PROPS_BANNED_T3  = 128
