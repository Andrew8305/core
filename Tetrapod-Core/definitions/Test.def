// language specific properties, note outdir is relative to current directory of the 
// code generator and should point to root of source tree
java package io.tetrapod.test
java outdir src

service Test version 1

request PrimTest
   // field tags cannot be less than one, although they need not be contiguous.  low tag numbers (< 64) are encoded
   // in one fewer byte in the wire protocol
   1: int intval
   2: double doubleval
   3: boolean boolval
   4: long longval
   5: byte byteval
   6: string stringval
     
// a tailing [###] in any class sets that as the struct ids.  otherwise a stable hash of the class name is used
response PrimTest [117]
   1: int intval = 1
   2: double doubleval = 3.4
   3: boolean boolval = true
   4: long longval = 500
   5: byte byteval = 127
   6: string stringval = "happy days"
     
request CollPrimTest
   1: int[] intarray
   2: int<list> intlist

// for collections, only the empty initializer is allowed (or nothing, which means null)
// adding full cross-language initializer support would make the parser quite a bit more complex
response CollPrimTest 
   1: int[] intarray = {}
   2: int<list> intlist = {}

response StructTest
   1: TestInfo info
   2: TestInfo<list> infolist
   3: TestInfo[] infoarray

request StructTest
   1: TestInfo info
   2: TestInfo<list> infolist = {}
   3: TestInfo[] infoarray = {}

// message name is SubscriptionName.ClassName, the SubscriptionName. is optional
message MySub.StatusUpdate
   1: int accountId

message MySub.OtherUpdate
   1: int accountId
   2: string name
   
struct TestInfo
   1: int test = 5
   